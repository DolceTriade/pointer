[global]
state_dir = ".reposerver-state"
default_interval = "5m"
max_repo_concurrency = 1
git_bin = "git"
indexer_bin = "pointer-indexer"
indexer_args = ["--upload-url", "http://127.0.0.1:8080/api/v1/index"]

[global.finish_hook]
command = "echo pointer-reposerver sweep finished"
timeout = "30s"

[[repo]]
name = "pointer"
url = "git@github.com:org/pointer.git"
interval = "2m"
branches = ["main", "release/*"]
indexer_args = ["--keep-latest", "3"]

[[repo.per_branch]]
branch = "main"
indexer_args = ["--live"]

[[repo.pre_index_hooks]]
command = "scripts/pre-index.sh"
timeout = "2m"

[[repo.post_upload_hooks]]
command = "scripts/post-upload.sh"
timeout = "2m"
